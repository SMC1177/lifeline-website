<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Retention Policy - Lifeline</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; color: #111; }
        h2 { margin-top: 30px; color: #2c3e50; font-size: 1.25em; border-bottom: 1px solid #f0f0f0; padding-bottom: 5px; }
        h3 { margin-top: 20px; color: #444; font-size: 1.1em; }
        ul { margin-bottom: 20px; }
        li { margin-bottom: 8px; }
        .policy-meta { color: #666; font-size: 0.9em; margin-bottom: 30px; }
        .warning-box { background-color: #fff3cd; color: #856404; padding: 15px; border-radius: 5px; border: 1px solid #ffeeba; margin: 20px 0; }
        .footer { margin-top: 50px; font-size: 0.9em; color: #777; border-top: 1px solid #eee; padding-top: 20px; text-align: center; }
    </style>
</head>
<body>

    <h1>Data Retention and Disposal Policy</h1>
    <div class="policy-meta">
        <strong>Application:</strong> Lifeline<br>
        <strong>Effective Date:</strong> December 14, 2025<br>
        <strong>Version:</strong> 1.0
    </div>

    <p>This policy outlines the specific principles, retention periods, and disposal methods Lifeline employs regarding user data. This policy is designed to ensure compliance with GDPR, CCPA, and the security requirements of our financial data partners (Plaid, Stripe).</p>

    <h2>1. General Retention Principles</h2>
    <p>Lifeline adheres to the principle of <strong>Storage Limitation</strong>. We retain personal data only for as long as necessary to:</p>
    <ul>
        <li>Provide the financial tracking and analysis services requested by the user.</li>
        <li>Comply with legal, tax, and accounting obligations.</li>
        <li>Resolve disputes and enforce our agreements.</li>
    </ul>

    <h2>2. Specific Retention Schedules</h2>

    <h3>A. Active Accounts</h3>
    <p>As long as an account remains active (user has logged in within the last 12 months), we retain:</p>
    <ul>
        <li><strong>Profile Data:</strong> Email, Name, Preferences.</li>
        <li><strong>Financial Data:</strong> Transactions, Mileage Logs, Expenses, and Asset History (stored in Firestore).</li>
        <li><strong>Integration Tokens:</strong> Plaid Access Tokens (encrypted) to maintain bank syncing.</li>
    </ul>

    <h3>B. Inactive Accounts</h3>
    <p>If an account is inactive for <strong>24 months</strong>, we will notify the user via email. If no action is taken within 30 days of notification, the account is classified as "Abandoned," and data disposal procedures are initiated.</p>

    <h3>C. Payment Records</h3>
    <p>We do not store full credit card numbers. Payment records (invoices, subscription history) held via <strong>Stripe</strong> are retained for a minimum of <strong>7 years</strong> as required by US tax law and standard accounting practices.</p>

    <h2>3. Data Disposal and Deletion</h2>
    <p>Upon a user's request for account deletion ("Right to Erasure") or upon the expiration of the retention period for inactive accounts, Lifeline executes the following disposal process within <strong>30 days</strong>:</p>

    <h3>Step 1: Database Purging (Firestore)</h3>
    <p>We execute a cryptographic delete operation on the user's document root (<code>users/{userId}</code>) and all associated sub-collections (transactions, assets, mileage). Once deleted from Google Cloud Firestore, this data is removed from active storage immediately and from backup systems within the provider's standard lifecycle (typically 30 days).</p>

    <h3>Step 2: Financial Connection Revocation (Plaid)</h3>
    <p>We call the Plaid API <code>/item/remove</code> endpoint. This invalidates the <code>access_token</code> and permanently disconnects Lifeline from the user's financial institution. Plaid then deletes the associated transaction data according to their own retention policies.</p>

    <h3>Step 3: Account Credentials (Firebase Auth)</h3>
    <p>The user's authentication record (Email/Password hash) is permanently deleted from the Firebase Authentication system, rendering the account inaccessible.</p>

    <h2>4. Backups and Archives</h2>
    <p>Disaster recovery backups are encrypted and stored in Google Cloud Storage. These backups are retained on a rolling 30-day window. Data deleted from the live application will naturally age out of backups after 30 days. We do not manually scrub individual records from backups unless legally compelled.</p>

    <h2>5. Requesting Deletion</h2>
    <p>Users may request immediate data deletion at any time by:</p>
    <ol>
        <li>Using the "Delete Account" feature within the application settings (if available).</li>
        <li>Emailing a formal request to our Data Protection Officer at: <strong>support@smacktax.com</strong></li>
    </ol>

    <div class="footer">
        &copy; 2025 Lifeline. All rights reserved.
    </div>

</body>
</html>